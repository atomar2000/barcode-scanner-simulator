(()=>{"use strict";var e={324:(e,t,n)=>{function r(){return"object"==typeof navigator&&"userAgent"in navigator?navigator.userAgent:"object"==typeof process&&void 0!==process.version?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function o(e,t,n,r){if("function"!=typeof n)throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(t)?t.reverse().reduce(((t,n)=>o.bind(null,e,n,t,r)),n)():Promise.resolve().then((()=>e.registry[t]?e.registry[t].reduce(((e,t)=>t.hook.bind(null,e,r)),n)():n(r)))}function s(e,t,n,r){const o=r;e.registry[n]||(e.registry[n]=[]),"before"===t&&(r=(e,t)=>Promise.resolve().then(o.bind(null,t)).then(e.bind(null,t))),"after"===t&&(r=(e,t)=>{let n;return Promise.resolve().then(e.bind(null,t)).then((e=>(n=e,o(n,t)))).then((()=>n))}),"error"===t&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch((e=>o(e,t)))),e.registry[n].push({hook:r,orig:o})}function a(e,t,n){if(!e.registry[t])return;const r=e.registry[t].map((e=>e.orig)).indexOf(n);-1!==r&&e.registry[t].splice(r,1)}n.r(t),n.d(t,{getLatestTagJson:()=>V});const c=Function.bind,i=c.bind(c);function u(e,t,n){const r=i(a,null).apply(null,n?[t,n]:[t]);e.api={remove:r},e.remove=r,["before","error","after","wrap"].forEach((r=>{const o=n?[t,r,n]:[t,r];e[r]=e.api[r]=i(s,null).apply(null,o)}))}const l=function(){const e={registry:{}},t=o.bind(null,e);return u(t,e),t};var d=`octokit-endpoint.js/0.0.0-development ${r()}`;function p(e,t){const n=Object.assign({},e);return Object.keys(t).forEach((r=>{!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}(t[r])?Object.assign(n,{[r]:t[r]}):r in e?n[r]=p(e[r],t[r]):Object.assign(n,{[r]:t[r]})})),n}function h(e){for(const t in e)void 0===e[t]&&delete e[t];return e}function f(e,t,n){if("string"==typeof t){let[e,r]=t.split(" ");n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);var r;n.headers=(r=n.headers)?Object.keys(r).reduce(((e,t)=>(e[t.toLowerCase()]=r[t],e)),{}):{},h(n),h(n.headers);const o=p(e||{},n);return"/graphql"===n.url&&(e&&e.mediaType.previews?.length&&(o.mediaType.previews=e.mediaType.previews.filter((e=>!o.mediaType.previews.includes(e))).concat(o.mediaType.previews)),o.mediaType.previews=(o.mediaType.previews||[]).map((e=>e.replace(/-preview/,"")))),o}var g=/\{[^}]+\}/g;function m(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function y(e,t){const n={__proto__:null};for(const r of Object.keys(e))-1===t.indexOf(r)&&(n[r]=e[r]);return n}function b(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map((function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e})).join("")}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function w(e,t,n){return t="+"===e||"#"===e?b(t):v(t),n?v(n)+"="+t:t}function E(e){return null!=e}function j(e){return";"===e||"&"===e||"?"===e}function k(e,t){var n=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(e,r,o){if(r){let e="";const o=[];if(-1!==n.indexOf(r.charAt(0))&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach((function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);o.push(function(e,t,n,r){var o=e[n],s=[];if(E(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),r&&"*"!==r&&(o=o.substring(0,parseInt(r,10))),s.push(w(t,o,j(t)?n:""));else if("*"===r)Array.isArray(o)?o.filter(E).forEach((function(e){s.push(w(t,e,j(t)?n:""))})):Object.keys(o).forEach((function(e){E(o[e])&&s.push(w(t,o[e],e))}));else{const e=[];Array.isArray(o)?o.filter(E).forEach((function(n){e.push(w(t,n))})):Object.keys(o).forEach((function(n){E(o[n])&&(e.push(v(n)),e.push(w(t,o[n].toString())))})),j(t)?s.push(v(n)+"="+e.join(",")):0!==e.length&&s.push(e.join(","))}else";"===t?E(o)&&s.push(v(n)):""!==o||"&"!==t&&"?"!==t?""===o&&s.push(""):s.push(v(n)+"=");return s}(t,e,r[1],r[2]||r[3]))})),e&&"+"!==e){var s=",";return"?"===e?s="&":"#"!==e&&(s=e),(0!==o.length?e:"")+o.join(s)}return o.join(",")}return b(o)})),"/"===e?e:e.replace(/\/$/,"")}function q(e){let t,n=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),o=Object.assign({},e.headers),s=y(e,["method","baseUrl","url","headers","request","mediaType"]);const a=function(e){const t=e.match(g);return t?t.map(m).reduce(((e,t)=>e.concat(t)),[]):[]}(r);var c;r=(c=r,{expand:k.bind(null,c)}).expand(s),/^http/.test(r)||(r=e.baseUrl+r);const i=y(s,Object.keys(e).filter((e=>a.includes(e))).concat("baseUrl"));if(!/application\/octet-stream/i.test(o.accept)&&(e.mediaType.format&&(o.accept=o.accept.split(/,/).map((t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`))).join(",")),r.endsWith("/graphql")&&e.mediaType.previews?.length)){const t=o.accept.match(/[\w-]+(?=-preview)/g)||[];o.accept=t.concat(e.mediaType.previews).map((t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:"+json"}`)).join(",")}return["GET","HEAD"].includes(n)?r=function(e,t){const n=/\?/.test(e)?"&":"?",r=Object.keys(t);return 0===r.length?e:e+n+r.map((e=>"q"===e?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${e}=${encodeURIComponent(t[e])}`)).join("&")}(r,i):"data"in i?t=i.data:Object.keys(i).length&&(t=i),o["content-type"]||void 0===t||(o["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(n)&&void 0===t&&(t=""),Object.assign({method:n,url:r,headers:o},void 0!==t?{body:t}:null,e.request?{request:e.request}:null)}function O(e,t,n){return q(f(e,t,n))}var T=function e(t,n){const r=f(t,n),o=O.bind(null,r);return Object.assign(o,{DEFAULTS:r,defaults:e.bind(null,r),merge:f.bind(null,r),parse:q})}(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":d},mediaType:{format:""}});class $ extends Error{name;status;request;response;constructor(e,t,n){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"response"in n&&(this.response=n.response);const r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),r.url=r.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=r}}function A(e){const t=e.request&&e.request.log?e.request.log:console,n=!1!==e.request?.parseSuccessResponseBody;(function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let r,o,s={},{fetch:a}=globalThis;if(e.request?.fetch&&(a=e.request.fetch),!a)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return a(e.url,{method:e.method,body:e.body,headers:Object.fromEntries(Object.entries(e.headers).map((([e,t])=>[e,String(t)]))),signal:e.request?.signal,...e.body&&{duplex:"half"}}).then((async a=>{o=a.url,r=a.status;for(const e of a.headers)s[e[0]]=e[1];if("deprecation"in s){const n=s.link&&s.link.match(/<([^>]+)>; rel="deprecation"/),r=n&&n.pop();t.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${s.sunset}${r?`. See ${r}`:""}`)}if(204!==r&&205!==r){if("HEAD"===e.method){if(r<400)return;throw new $(a.statusText,r,{response:{url:o,status:r,headers:s,data:void 0},request:e})}if(304===r)throw new $("Not modified",r,{response:{url:o,status:r,headers:s,data:await S(a)},request:e});if(r>=400){const t=await S(a),n=new $(function(e){if("string"==typeof e)return e;let t;return t="documentation_url"in e?` - ${e.documentation_url}`:"","message"in e?Array.isArray(e.errors)?`${e.message}: ${e.errors.map(JSON.stringify).join(", ")}${t}`:`${e.message}${t}`:`Unknown error: ${JSON.stringify(e)}`}(t),r,{response:{url:o,status:r,headers:s,data:t},request:e});throw n}return n?await S(a):a.body}})).then((e=>({status:r,url:o,headers:s,data:e}))).catch((t=>{if(t instanceof $)throw t;if("AbortError"===t.name)throw t;let n=t.message;throw"TypeError"===t.name&&"cause"in t&&(t.cause instanceof Error?n=t.cause.message:"string"==typeof t.cause&&(n=t.cause)),new $(n,500,{request:e})}))}async function S(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json().catch((()=>e.text())).catch((()=>"")):!t||/^text\/|charset=utf-8$/.test(t)?e.text():function(e){return e.arrayBuffer()}(e)}var I=function e(t,n){const r=t.defaults(n);return Object.assign((function(t,n){const o=r.merge(t,n);if(!o.request||!o.request.hook)return A(r.parse(o));const s=(e,t)=>A(r.parse(r.merge(e,t)));return Object.assign(s,{endpoint:r,defaults:e.bind(null,r)}),o.request.hook(s,o)}),{endpoint:r,defaults:e.bind(null,r)})}(T,{headers:{"user-agent":`octokit-request.js/0.0.0-development ${r()}`}}),C=class extends Error{constructor(e,t,n){super("Request failed due to following response errors:\n"+n.errors.map((e=>` - ${e.message}`)).join("\n")),this.request=e,this.headers=t,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},x=["method","baseUrl","url","headers","request","query","mediaType"],B=["query","method","url"],D=/\/api\/v3\/?$/;function U(e,t){const n=e.defaults(t);return Object.assign(((e,t)=>function(e,t,n){if(n){if("string"==typeof t&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const e in n)if(B.includes(e))return Promise.reject(new Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}const r="string"==typeof t?Object.assign({query:t},n):t,o=Object.keys(r).reduce(((e,t)=>x.includes(t)?(e[t]=r[t],e):(e.variables||(e.variables={}),e.variables[t]=r[t],e)),{}),s=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return D.test(s)&&(o.url=s.replace(D,"/api/graphql")),e(o).then((e=>{if(e.data.errors){const t={};for(const n of Object.keys(e.headers))t[n]=e.headers[n];throw new C(o,t,e.data)}return e.data.data}))}(n,e,t)),{defaults:U.bind(null,n),endpoint:n.endpoint})}U(I,{headers:{"user-agent":`octokit-graphql.js/0.0.0-development ${r()}`},method:"POST",url:"/graphql"});var P=/^v1\./,_=/^ghs_/,R=/^ghu_/;async function F(e){const t=3===e.split(/\./).length,n=P.test(e)||_.test(e),r=R.test(e);return{type:"token",token:e,tokenType:t?"app":n?"installation":r?"user-to-server":"oauth"}}async function L(e,t,n,r){const o=t.endpoint.merge(n,r);return o.headers.authorization=function(e){return 3===e.split(/\./).length?`bearer ${e}`:`token ${e}`}(e),t(o)}var N=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if("string"!=typeof e)throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(F.bind(null,e),{hook:L.bind(null,e)})};const z="6.0.1",G=()=>{},H=console.warn.bind(console),J=console.error.bind(console),M=`octokit-core.js/${z} ${r()}`;class W{static VERSION=z;static defaults(e){return class extends(this){constructor(...t){const n=t[0]||{};super("function"!=typeof e?Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null):e(n))}}}static plugins=[];static plugin(...e){const t=this.plugins;return class extends(this){static plugins=t.concat(e.filter((e=>!t.includes(e))))}}constructor(e={}){const t=new l,n={baseUrl:I.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,"request")}),mediaType:{previews:[],format:""}};var r;if(n.headers["user-agent"]=e.userAgent?`${e.userAgent} ${M}`:M,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=I.defaults(n),this.graphql=(r=this.request,U(r,{method:"POST",url:"/graphql"})).defaults(n),this.log=Object.assign({debug:G,info:G,warn:H,error:J},e.log),this.hook=t,e.authStrategy){const{authStrategy:n,...r}=e,o=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap("request",o.hook),this.auth=o}else if(e.auth){const n=N(e.auth);t.wrap("request",n.hook),this.auth=n}else this.auth=async()=>({type:"unauthenticated"});const o=this.constructor;for(let t=0;t<o.plugins.length;++t)Object.assign(this,o.plugins[t](this,e))}request;graphql;log;hook;auth}async function V(){const e=new W({auth:""});return await e.request("GET /repos/atomar2000/barcode-scanner-simulator/releases/latest",{owner:"atomar2000",repo:"barcode-scanner-simulator",headers:{"X-GitHub-Api-Version":"2022-11-28"}})}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e="v1.0.0-alpha",t=n(324),r=new Map;r.set("1D","&code=GS1-128&translate-esc=on"),r.set("2D","&code=DataMatrix&translate-esc=on&dmsize=Default"),window.onload=function(){l();const n=document.getElementById("scanButton"),r=document.getElementById("generateBarcode2D"),o=document.getElementById("generateBarcode1D"),s=document.getElementById("loadingSpinner");n&&n.addEventListener("click",i),r&&r.addEventListener("click",c),o&&o.addEventListener("click",c),s&&(s.style.display="none"),document.getElementById("currentVersion").textContent=e,t.getLatestTagJson().then((t=>{console.log("result: ",t),200===t.status&&e!==t.data?.tag_name&&(document.getElementById("udpateRequired").setAttribute("href",t.data?.html_url),document.getElementById("udpateRequired").text="Click here to upgrade to: "+t.data?.tag_name)}))};var o="https://barcode.tec-it.com/barcode.ashx?data=",s="",a="";function c(e){const t=document.getElementById("barcodeInput").value;s=function(e){var t=encodeURI(e);return t.replace("%7C","%5CF"),t}(t),a="Create 1D-Barcode"===e.target.textContent?r.get("1D"):r.get("2D"),function(e){document.getElementById("barcodeImage").setAttribute("src",""),e&&0!==e.length?function(e,t){var n=document.getElementById("loadingSpinner");n.style.display="block";var r=document.getElementById("barcodeImage");r.onload=function(){n.style.display="none"},r.src=t}(0,o+e+a):(document.getElementById("loadingSpinner").style.display="none",document.getElementById("barcodeImage").setAttribute("src",""))}(s),l(t),document.getElementById("barcodeInput").value=""}async function i(){console.log("onScan called?");const e=document.getElementById("barcodeInput").value;await l(e);const t=await async function(){let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e}();console.log("curr_tab: ",t),chrome.scripting.executeScript({target:{tabId:t.id},func:u,args:[e]}).then((()=>document.getElementById("barcodeInput").value=""))}function u(e){const t=window.document.activeElement;t&&console.log("activeElement: ",t);for(const r of e){var n=new KeyboardEvent("keydown",{key:r});window.document.dispatchEvent(n),t&&(t.value+=r,t.dispatchEvent(new Event("input")))}n=new KeyboardEvent("keydown",{key:"Enter",keyCode:13}),window.document.dispatchEvent(n),t&&t.dispatchEvent(new Event("input"))}async function l(e){var t=[];await chrome.storage.local.get(["barcodeCacheData"]).then((e=>{t=e.barcodeCacheData})),console.log("previous barcodes: ",t);var n=[];if(t&&e&&e.length){for(var r=0;r<t.length;r++)if(t[r]===e)return;n=[e,...t]}else t?n=t:e&&e.length&&(n=[e]);var o=document.createElement("ul"),s=n;s&&s.length>5&&(s=s.slice(0,5)),s.forEach((function(e){var t=document.createElement("li"),n=document.createElement("button");n.textContent=e,n.addEventListener("click",d),t.appendChild(n),o.appendChild(t)})),await chrome.storage.local.set({barcodeCacheData:s,cacheTime:Date.now()});const a=document.querySelector("#recentBarcodes");console.log("recentBarcodesDiv: ",a),null!=a&&a.hasChildNodes()&&a.removeChild(a.childNodes[0]),null!=a&&a.appendChild(o),console.log("reached end? updateCache")}function d(e){document.getElementById("barcodeInput").value=e.target.textContent}})()})();